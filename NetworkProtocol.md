## Сетевой протокол ##
Для режима сетевой игры разрабатывается специальный протокол передачи данных.

Передача данных происходит непосредственно, по TCP-соединению, при помощи стандартных сообщений.

Сетевые типы:
  * **int** - 8 байт, big endian
  * **char** - 1 байт
  * **string** - нуль терминированная строка в формате UTF-8

Первый байт отвечает за тип передаваемых данных

  * **0x00** `NEXT_TURN`, текущая игровая ситуация изменилась.
  * **0x01** `SERVICE_MESSAGE`, служебное сообщение отправляется только от сервера к клиенту
  * **0x02** `PLAYER_MESSAGE`, текстовое сообщение от игроков друг-другу
  * **0xAA** `INIT`, пакет установки соединения
  * **0xFF** `PING`, пакет пинга

---

## Сообщения: ##
### NEXT\_TURN ###
Пакет сообщает, что текущая игровая ситуация изменилась.

Структура пакета:
  * **0x00**
  * **int** - идентификатор клетки кто ходит
  * **int** - идентификатор клетки куда ходит

---

### SERVICE\_MESSAGE ###
Сервисное сообщение передается только от сервера к клиенту.

Структура пакета:
  * **0x01**
  * **char** - идентификатор сообщения может принимать значения
    1. 0x00
    1. 0x01

---

### PLAYER\_MESSAGE ###
Текстовое сообщения от игрока к игроку.

Структура пакета:
  * **0x02**
  * **string** - сообщение

---

### INIT ###
Пакет отправляется клиентом при установке соединения. Проверяется версия билда, если она не совпадает - соединение будет разорвано.

Структура пакета:
  * **0xAA**
  * **int** - версия билда UGOLKI\_BUILD\_VERSION


---

### PING ###
Пакет для измерения задержки и проверки клиента противника на таймаут.

Структура пакета:
  * **0xFF**
  * **char** - тип пакета
    1. 0x00 - запрос
    1. 0x01 - ответ на пинг
  * **int** - В случае запроса отправляется случайное число, в случае ответа на пришедший пинг - то же, что и во входящем пакете.

---

## Таймаут соединения ##
В случае отключение соединения таймаут ожидания его восстановления равняется 30 секундам.