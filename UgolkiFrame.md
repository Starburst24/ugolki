# `UgolkiFrame` #
Класс описывающий состояние игрового поля в какой то момент.
[UgolkiGUI](UgolkiGUI.md) обращается к объекту для отображения ситуации на поле. Так же объект используется ботом, он копирует первоначальный объект (по необходимости), выполняет вычисления наилучшего хода на этих объектах и текущий объект фрейма приводится в соответствие с лучшим в боте.

## Поля: ##
#### char currentPlayersTurnId ####
Переменная типа **char** - идентификатор игрока которых ходит следующим.
Принимает значения:
  * -1 — игра окончена, не ходит никто.
  * 0 — игрок 1
  * 1 — игрок 2

---

#### char matrix`[` DESK\_SIZE `][` DESK\_SIZE `]` ####
Матрица камней. Двумерный массив **char** размерами **DESK\_SIZE `*` DESK\_SIZE**.
Нумерация начинается с левой верхней клетки слева-направо, сверху вниз.
Элементы принимают значения:
  * -1 — пустая клетка
  * 0 — игрок 1
  * 1 — игрок 2
Тип позволяет впоследствии добавить поддержку игр для большего чем 2х игроков

---

#### QList< QPair<int, int> > possibleMoves`[` DESK\_SIZE `][` DESK\_SIZE `]` ####
Список доступных ходов для фишек игрока currentPlayersTurnId. Пересчитывается моделью.

---

#### int turnCount ####
Счетчик ходов. Увеличивается функцией movePiece после хода второго игрока.

---

#### QPair<int, int> playerHouse `[` UGOLKI\_MAXPLAYERS `]` ####
Массив координат клеток. Каждый элемент массива - координаты угловой клетки, которая находится в доме игрока.

---

#### double averageDistanceToOpponentsHouse `[`UGOLKI\_MAXPLAYERS `]` ####
Массив средних расстояний до дома противника.

---

## Методы: ##
#### void resetFrame() ####
Метод инициализирует фрейм так, чтобы он соответствовал игровой ситуации перед началом игры: все камни игроков стоят на своих начальный позициях, идентификатор хода указывает на первого игрока, счётчик ходов обнулён. Испускается frameChanged, для пересчета доступных ходов.

---

#### void movePiece(int oldPosRow, int oldPosColumn, int newPosRow, int newPosColumn) ####
Метод передвигает камень (если он там есть) со старой позиции на новую. Если ходит второй игрок, то после передвижения камня счетчик увеличивается на 1. Меняется действующий игрок. Испускается сигнал frameChanged. Модель перехватывает его и пересчитывает доступные ходы.

---

#### bool validateMove(int oldPosRow, int oldPosColumn, int newPosRow, int newPosColumn) ####
Метод проверяет возможность хода во фрейме фишки на позиции oldPos в позицию newPos; Метод всего лишь смотрит находится ли в списке возможных этот ход.

---

#### double distance(int i, int j, int k, int l) ####
Метод возращает расстояние между двумя клетками с координатами i,j и k,l, соответствено.

---

#### double distanceToHouse(int row, int column, int playersHouseId) ####
Метод возвращает расстояние от клетки с координатами row, column до угловой клетки дома игрока playersHouseId.

---

#### bool isInHouse(int row, int column, int playersHouseId) ####
Метод возвращает истину, если клетка с координатами row, column принадлежит дому игрока playerHouseId.

---

#### int playerOpponent(int player) ####
Метод возвращает идентификатор оппонента для игрока player.

---

## Сигналы: ##
#### frameChanged(UgolkiFrame `*`currentFrame) ####
Сигнал оповещающий об изменении игрового положения. Передает указатель на этот фрейм.

---
